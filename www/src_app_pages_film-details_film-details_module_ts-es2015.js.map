{"version":3,"sources":["./src/app/pages/film-details/film-details-routing.module.ts","./src/app/pages/film-details/film-details.module.ts","./src/app/pages/film-details/film-details.page.ts","./src/app/services/favorite/favorite.service.ts","./src/app/pages/film-details/film-details.page.scss","./src/app/pages/film-details/film-details.page.html"],"names":[],"mappings":"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","file":"src_app_pages_film-details_film-details_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FilmDetailsPage } from './film-details.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FilmDetailsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FilmDetailsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FilmDetailsPageRoutingModule } from './film-details-routing.module';\n\nimport { FilmDetailsPage } from './film-details.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    FilmDetailsPageRoutingModule\n  ],\n  declarations: [FilmDetailsPage]\n})\nexport class FilmDetailsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Film } from '../../types/film';\nimport { ApiService } from '../../services/api/api.service';\nimport { EmailComposer } from '@ionic-native/email-composer/ngx';\nimport { FavoriteService } from '../../services/favorite/favorite.service';\n\n@Component({\n    selector: 'app-film-details',\n    templateUrl: './film-details.page.html',\n    styleUrls: ['./film-details.page.scss'],\n})\nexport class FilmDetailsPage implements OnInit {\n\n    film: Film;\n    isFavorite: boolean = false;\n    filmId: string | null = null;\n\n    constructor(\n        private activatedRoute: ActivatedRoute,\n        private api: ApiService,\n        private emailComposer: EmailComposer,\n        private favoriteService: FavoriteService\n    ) {\n    }\n\n    ngOnInit() {\n        this.filmId = this.activatedRoute.snapshot.paramMap.get('id');\n\n        this.api.getFilm(this.filmId).subscribe(response => {\n            this.film = response;\n        });\n\n        this.favoriteService.isFavorite(this.filmId).then(isFavorite => {\n            this.isFavorite = isFavorite\n        });\n    }\n\n    favoriteFilm(): void {\n        this.favoriteService.favoriteFilm(this.filmId).then(() => {\n            this.isFavorite = true\n        });\n    }\n\n    unfavoriteFilm(): void {\n        this.favoriteService.unfavoriteFilm(this.filmId).then(() => {\n            this.isFavorite = false\n        });\n    }\n\n    shareFilm(): void {\n        const email = {\n            to: 'info@jakubjirous.cz',\n            subject: `I love this one ${this.film?.title}`,\n            body: `Can you remember the opening?<br/><br/>\"${this.film?.opening_crawl}\"`,\n            isHtml: true,\n        }\n\n        this.emailComposer.open(email);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Storage } from '@ionic/storage-angular';\n\nconst STORAGE_KEY = 'favoriteFilms';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class FavoriteService {\n\n    constructor(private storage: Storage) {\n        this.init()\n    }\n\n    async init() {\n        await this.storage.create();\n    }\n\n    getAllFavouriteFilms(): Promise<string[]> {\n        return this.storage.get(STORAGE_KEY);\n    }\n\n    isFavorite(filmId: string): Promise<boolean> {\n        return this.getAllFavouriteFilms().then(result => {\n            return result && result.indexOf(filmId) !== -1;\n        });\n    }\n\n    favoriteFilm(filmId: string) {\n        return this.getAllFavouriteFilms().then(result => {\n            if (result) {\n                result.push(filmId)\n                return this.storage.set(STORAGE_KEY, result);\n            } else {\n                return this.storage.set(STORAGE_KEY, [filmId]);\n            }\n        })\n    }\n\n    unfavoriteFilm(filmId: string) {\n        return this.getAllFavouriteFilms().then(result => {\n            if (result) {\n                const index = result.indexOf(filmId);\n                result.splice(index, 1);\n                return this.storage.set(STORAGE_KEY, result);\n            }\n        })\n    }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJmaWxtLWRldGFpbHMucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"/tabs/films\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>{{ film?.title }}</ion-title>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button (click)=\\\"unfavoriteFilm()\\\" *ngIf=\\\"isFavorite\\\">\\n                <ion-icon name=\\\"star\\\" slot=\\\"icon-only\\\" color=\\\"secondary\\\"></ion-icon>\\n            </ion-button>\\n            <ion-button (click)=\\\"favoriteFilm()\\\" *ngIf=\\\"!isFavorite\\\">\\n                <ion-icon name=\\\"star-outline\\\" slot=\\\"icon-only\\\" color=\\\"secondary\\\"></ion-icon>\\n            </ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\" *ngIf=\\\"film\\\">\\n\\n    <ion-card *ngIf=\\\"film?.opening_crawl\\\" class=\\\"card ion-margin\\\">\\n        <ion-card-header>\\n            <ion-card-title>Episode {{ film?.episode_id }}: {{ film?.title }}</ion-card-title>\\n        </ion-card-header>\\n        <ion-card-content>\\n            {{ film?.opening_crawl }}\\n        </ion-card-content>\\n        <ion-item lines=\\\"none\\\" class=\\\"card__info\\\" *ngIf=\\\"film?.director\\\">\\n            <ion-icon name=\\\"videocam-outline\\\" slot=\\\"start\\\"></ion-icon>\\n            Director: {{ film?.director }}\\n        </ion-item>\\n        <ion-item lines=\\\"none\\\" class=\\\"card__info\\\" *ngIf=\\\"film?.producer\\\">\\n            <ion-icon name=\\\"film\\\" slot=\\\"start\\\"></ion-icon>\\n            Producer: {{ film?.producer }}\\n        </ion-item>\\n        <ion-item lines=\\\"none\\\" class=\\\"card__info\\\" *ngIf=\\\"film?.release_date\\\">\\n            <ion-icon name=\\\"calendar\\\" slot=\\\"start\\\"></ion-icon>\\n            Release Date: {{ film?.release_date | date }}\\n        </ion-item>\\n    </ion-card>\\n\\n    <ion-button expand=\\\"full\\\" (click)=\\\"shareFilm()\\\" class=\\\"ion-margin\\\">\\n        Share by E-mail\\n    </ion-button>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}